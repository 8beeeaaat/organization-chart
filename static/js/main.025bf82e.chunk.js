(this["webpackJsonporganization-chart"]=this["webpackJsonporganization-chart"]||[]).push([[0],{17:function(e,t,a){},19:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),s=a(5),c=a(2),i=a.n(c),o=a(9),u=a.n(o),l=a(3),m=a(1),d=a.n(m),f=(a(17),a(0)),j=function(e){var t=e.master,a=e.members,n=t.departments,r=t.groups;return Object(f.jsxs)("div",{className:d()("flex","flex-col","gap-6",e.className),children:[Object(f.jsxs)("dl",{className:d()("shadow-md","p-4"),children:[Object(f.jsx)("dt",{className:d()("font-bold"),children:"Departments"}),Object.keys(n).filter((function(e){return n[e].name})).map((function(e){var t;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("dd",{className:d()("font-medium","text-sm","mt-2","whitespace-nowrap"),children:"".concat(n[e].name," --\n              ").concat(null===(t=a.find((function(t){return t.department.key===e&&t.isDepartmentManager})))||void 0===t?void 0:t.dispname,"\n              ")})})}))]}),Object(f.jsxs)("dl",{className:d()("shadow-md","p-4"),children:[Object(f.jsx)("dt",{className:d()("font-bold"),children:"Groups"}),Object.keys(r).filter((function(e){return r[e].name})).map((function(e){var t;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("dd",{className:d()("font-medium","text-sm","mt-2","whitespace-nowrap"),children:"".concat(r[e].name," --\n              ").concat(null===(t=a.find((function(t){return t.group.key===e&&t.isGroupLeader})))||void 0===t?void 0:t.dispname,"\n              ")})})}))]})]})},b=function(e){var t=e.user,a=e.onClickLogout,n=Object(c.useState)(),r=Object(l.a)(n,2),s=r[0],i=r[1];return Object(c.useEffect)((function(){t&&i({imageUrl:t.getBasicProfile().getImageUrl(),name:t.getBasicProfile().getName()})}),[t]),Object(f.jsx)("header",{className:d()("flex","justify-end","gap-2",e.className),children:s?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{className:"h-10 w-10 rounded-full shadow-md",src:s.imageUrl,alt:s.name}),Object(f.jsx)("button",{className:"btn btn-danger",onClick:a,children:"logout"})]}):null})},p=Object(c.memo)((function(e){var t=Object(c.useRef)(null),a=function(){t.current&&(t.current.style.opacity="1",t.current.style.visibility="visible")},n=function(){t.current&&(t.current.style.opacity="0",t.current.style.visibility="hidden")};return Object(f.jsxs)("div",{className:d()("flex","relative","justify-between","items-center","w-full",e.className),children:[Object(f.jsx)("p",{className:d()("-translate-x-1/2","absolute","before:-top-1","before:-translate-x-1/2","before:absolute","before:bg-black","before:block","before:h-2","before:left-1/2","before:rotate-45","before:transform","before:w-2","before:z-0","bg-gray-800","duration-150","flex-col","flex","gap-1","font-bold","invisible","items-center","left-1/2","mt-2","mx-auto","px-3","py-2","rounded","text-white","text-xs","top-full","transform","transition-all","whitespace-nowrap","z-10"),ref:t,onMouseEnter:a,onMouseLeave:n,children:e.texts.map((function(e,t){return Object(f.jsx)("span",{children:e},e)}))}),Object(f.jsx)("div",{className:d()("w-full"),onMouseEnter:a,onMouseLeave:n,children:e.children})]})}));p.displayName="Tooltip";var g=a(11),h=Object(c.memo)((function(e){var t=e.member,a=t.department,n=t.featureTeam,r=t.tag,s=t.commits,c=t.role;return Object(f.jsx)(p,{texts:[a.name,t.dispname].concat(Object(g.a)(Object.keys(s).filter((function(e){return Number(s[e].rate)>0})).map((function(e){return"".concat(s[e].name,": ").concat(10*s[e].rate,"%")})))),children:Object(f.jsxs)("dl",{"data-tooltip-target":"".concat(n.name,"_").concat(r.key,"_").concat(t.name),children:[Object(f.jsx)("dt",{className:d()("font-semibold"),children:t.dispname}),Object(f.jsx)("dd",{children:c.name}),Object(f.jsx)("dd",{className:d()("flex","rounded-lg","overflow-hidden"),children:Object.keys(t.commits).filter((function(e){return t.commits[e].rate>0})).reduce((function(e,a){for(var s=0;s<t.commits[a].rate;s++)e.push(Object(f.jsx)("div",{className:d()("h-2","border-gray-200"),style:{width:"".concat(10,"%"),background:t.commits[a].color}},"".concat(n.name,"_").concat(r.key,"_").concat(t.name,"_").concat(a,"_").concat(s)));return e}),[])})]})})}));p.displayName="Tooltip";var x=function(e){var t=e.organization,a=e.master,n=a.teams,r=i.a.useState(),s=Object(l.a)(r,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){u(Object.keys(a.teams).reduce((function(e,a){return e[a]=Object.keys(t[a]).map((function(e){return t[a][e]})).flat().filter((function(e){return e.featureTeam.key===a})).reduce((function(e,t){return e+=t.commits[a].rate}),0),e.sum+=e[a],e}),{sum:0}))}),[a.teams,t]),Object(f.jsxs)("div",{className:d()("grid","grid-flow-row","gap-24",e.className),children:[Object(f.jsx)("div",{className:d()("shadow-md","p-4"),children:o?Object(f.jsx)(p,{texts:Object.keys(n).map((function(e){return"".concat(n[e].name,": ").concat(Math.floor((o[e]||1)/(o.sum||0)*100),"%")})),children:Object(f.jsx)("ul",{className:d()("flex","rounded-full","overflow-hidden"),children:Object.keys(n).map((function(e){return Object(f.jsx)("li",{className:d()("h-4"),style:{background:n[e].color,width:"".concat((o[e]||1)/(o.sum||0)*100,"%")}})}))})}):null}),Object.keys(n).map((function(a){var r=n[a],s=t[a];return Object(f.jsxs)("section",{className:d()("grid","grid-flow-row",e.className),children:[Object(f.jsx)("h2",{className:d()("font-extrabold","text-3xl","text-center","flex","justify-self-center","justify-center","p-2"),style:{color:r.color},children:r.name},"".concat(a,"-name")),Object(f.jsx)("main",{className:d()("gap-10","mt-8"),children:Object(f.jsx)("ul",{className:d()("grid","grid-flow-row","gap-16","py-16"),children:Object.keys(s).filter((function(e){return s[e].length})).map((function(e){return Object(f.jsx)("li",{className:d()("flex","gap-4","justify-center"),children:Object(f.jsx)("ul",{className:d()("flex","w-full","gap-4","justify-center","flex-wrap"),children:s[e].map((function(t){return Object(f.jsx)("li",{className:d()("flex","justify-center","w-full","max-w-xs","p-4","shadow-sm","hover:shadow-md"),children:Object(f.jsx)(h,{member:t})},"".concat(a,"_").concat(e,"_").concat(t.name))}))})},"".concat(a,"_").concat(e))}))})},"".concat(a,"-body"))]})}))]})};var O=function(e){var t=e.authInstance,a=e.spreadsheetId,n=Object(c.useState)(),i=Object(l.a)(n,2),o=i[0],u=i[1],m=Object(c.useState)(),p=Object(l.a)(m,2),g=p[0],h=p[1],O=Object(c.useState)(),v=Object(l.a)(O,2),y=v[0],w=v[1],N=Object(c.useState)(),A=Object(l.a)(N,2),k=A[0],I=A[1],E=Object(c.useState)(),B=Object(l.a)(E,2),F=B[0],M=B[1],P=Object(c.useState)(),T=Object(l.a)(P,2),C=T[0],L=T[1],G=Object(c.useState)(),R=Object(l.a)(G,2),S=R[0],J=R[1],z=Object(c.useState)(),U=Object(l.a)(z,2),D=U[0],V=U[1],K=Object(c.useState)(),X=Object(l.a)(K,2),H=X[0],Q=X[1],q=Object(c.useState)(),W=Object(l.a)(q,2),Z=W[0],Y=W[1];function _(){return(_=Object(s.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.signIn();case 3:return n=e.sent,u(n),e.t0=h,e.next=8,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_department"});case 8:return e.t1=e.sent.result,(0,e.t0)(e.t1),e.t2=w,e.next=13,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_group"});case 13:return e.t3=e.sent.result,(0,e.t2)(e.t3),e.t4=I,e.next=18,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_role"});case 18:return e.t5=e.sent.result,(0,e.t4)(e.t5),e.t6=M,e.next=23,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_team"});case 23:return e.t7=e.sent.result,(0,e.t6)(e.t7),e.t8=L,e.next=28,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_tag"});case 28:return e.t9=e.sent.result,(0,e.t8)(e.t9),e.t10=V,e.next=33,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"table"});case 33:e.t11=e.sent.result,(0,e.t10)(e.t11),e.next=40;break;case 37:e.prev=37,e.t12=e.catch(0),alert("Error: "+e.t12);case 40:case"end":return e.stop()}}),e,null,[[0,37]])})))).apply(this,arguments)}function $(){return($=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.signOut();case 3:u(void 0),V(void 0),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Error: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ee(e){var t=e[0];return(null===e||void 0===e?void 0:e.filter((function(e,t){return t>0}))).reduce((function(e,a){var n=a.reduce((function(e,a,n){return e[t[n]]=a,e}),{});return e[n.key]=n,e}),{})}return Object(c.useEffect)((function(){g&&g.values&&y&&y.values&&k&&k.values&&F&&F.values&&C&&C.values&&J({departments:ee(g.values),groups:ee(y.values),roles:ee(k.values),teams:ee(F.values),tags:ee(C.values)})}),[g,y,k,F,C]),Object(c.useEffect)((function(){var e;if(S&&D&&D.values){var t=D.values[0],a=Object.keys(S.teams),n=null===(e=D.values)||void 0===e?void 0:e.filter((function(e,t){return t>0})).map((function(e){return{name:e[t.indexOf("name")],department:S.departments[e[t.indexOf("department")]],dispname:e[t.indexOf("dispname")],featureTeam:S.teams[e[t.indexOf("feature_team")]],isDepartmentManager:"TRUE"===e[t.indexOf("is_department_manager")],isGroupLeader:"TRUE"===e[t.indexOf("is_group_leader")],group:S.groups[e[t.indexOf("group")]],role:S.roles[e[t.indexOf("role")]],tag:S.tags[e[t.indexOf("tag")]],workingRate:Number(e[t.indexOf("working_rate")]),enabled:"TRUE"===e[t.indexOf("enabled")],commits:a.reduce((function(a,n){return a[n]={name:S.teams[n].name,rate:Number(e[t.indexOf(n)])*Number(e[t.indexOf("working_rate")])*Number(e[t.indexOf("commits_rate")])*10,color:S.teams[n].color},a}),{})}})).filter((function(e){return e.enabled})).sort((function(e){return e.isGroupLeader?-1:0})).sort((function(e){return e.isDepartmentManager?-1:0}));Y(n)}}),[S,D]),Object(c.useEffect)((function(){if(Z&&S){var e=Object.keys(S.teams),t=Object.keys(S.tags);Q(e.reduce((function(e,a){return e[a]=t.reduce((function(e,t){return e[t]=Z.filter((function(e){return e.tag.key===t&&e.featureTeam.key===a})),e}),{}),e}),{}))}}),[Z,S]),gapi.auth2?Object(f.jsxs)("div",{className:d()("relative","grid","grid-flow-row","gap-2","bg-gray-200"),children:[Object(f.jsx)(b,{className:d()("sticky","top-0","bg-gray-100","p-4","z-10","shadow-lg"),user:o,onClickLogout:function(){return $.apply(this,arguments)}}),Object(f.jsx)("main",{className:d()("relative","flex","p-4","gap-4"),children:S&&H?Object(f.jsxs)(f.Fragment,{children:[Z?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(j,{className:d()("relative","bg-gray-50","p-4","shadow-lg"),master:S,members:Z})}):null,Object(f.jsx)(x,{className:d()("relative","bg-gray-50","p-4","shadow-lg"),organization:H,master:S})]}):Object(f.jsx)("button",{className:d()("justify-self-center","m-auto"),onClick:function(){return _.apply(this,arguments)},children:Object(f.jsx)("img",{src:"data:image/png;base64,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",alt:""})})})]}):null},v=(a(19),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,25)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))});a(20).config();var y="AIzaSyA0kfS5T_RvsR1TJeO3yHr4Fxtrl-j88uI",w="746545264204-tr13jtretflc97f20pqnehpl02t1of22.apps.googleusercontent.com",N="1SIqIX6tYg7P4hecUJKGvICkqHpw6wAaNSqtqcnBJgxs";function A(){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.client.init({apiKey:y,discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],clientId:w,scope:"https://www.googleapis.com/auth/spreadsheets.readonly"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){try{if(gapi.load("client",A),!gapi.auth2)return u.a.render(Object(f.jsx)(i.a.StrictMode,{}),document.getElementById("root")),void setTimeout(I,1e3);var e=gapi.auth2.getAuthInstance();u.a.render(Object(f.jsx)(i.a.StrictMode,{children:e?Object(f.jsx)(O,{authInstance:e,spreadsheetId:N}):null}),document.getElementById("root")),v()}catch(t){console.error(t)}}I()}},[[24,1,2]]]);
//# sourceMappingURL=main.025bf82e.chunk.js.map