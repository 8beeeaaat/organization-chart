(this["webpackJsonporganization-chart"]=this["webpackJsonporganization-chart"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var r=a(4),n=a.n(r),s=a(5),c=a(1),i=a.n(c),l=a(7),o=a.n(l),u=a(3),m=a(2),d=a.n(m),g=(a(14),a(0)),f=function(e){var t=e.master,a=e.members,r=[{key:"division",title:"Divisions",items:t.divisions,leaderKey:"isDivisionManager"},{key:"department",title:"Departments",items:t.departments,leaderKey:"isDepartmentManager"},{key:"group",title:"Groups",items:t.groups,leaderKey:"isGroupLeader"}];return Object(g.jsx)("div",{className:d()("flex","flex-col","gap-6",e.className),children:r.map((function(e){var t=e.key,r=e.leaderKey,n=e.title,s=e.items;return Object(g.jsxs)("dl",{className:d()("shadow-md","p-4"),children:[Object(g.jsx)("dt",{className:d()("font-bold"),children:n}),Object.keys(s).filter((function(e){return s[e].name})).map((function(e,n){var c,i;return Object(g.jsxs)("dd",{className:"font-medium text-sm text-gray mt-2 whitespace-nowrap",children:[Object(g.jsx)("span",{className:"text-gray-600 font-semibold",children:s[e].name}),Object(g.jsx)("br",{}),(null===(c=a.find((function(a){return a[t].key===e&&a[r]})))||void 0===c?void 0:c.dispname)?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{className:"text-gray-600",children:null===(i=a.find((function(a){return a[t].key===e&&a[r]})))||void 0===i?void 0:i.dispname})," ",Object(g.jsx)("br",{})]}):null,Object(g.jsxs)("span",{className:"text-gray-600 text-xs",children:[a.filter((function(a){return a[t].key===e})).length," members"]})]},"".concat(t,"-").concat(n))}))]},t)}))})},b=function(e){var t=e.user,a=e.onClickLogout,r=Object(c.useState)(),n=Object(u.a)(r,2),s=n[0],i=n[1];return Object(c.useEffect)((function(){t&&i({imageUrl:t.getBasicProfile().getImageUrl(),name:t.getBasicProfile().getName()})}),[t]),Object(g.jsx)("header",{className:d()("flex","justify-end","gap-2",e.className),children:s?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{className:"h-10 w-10 rounded-full shadow-md",src:s.imageUrl,alt:s.name}),Object(g.jsx)("button",{className:"btn btn-danger",onClick:a,children:"logout"})]}):null})},j=Object(c.memo)((function(e){var t=Object(c.useRef)(null),a=function(){t.current&&(t.current.style.opacity="1",t.current.style.visibility="visible")},r=function(){t.current&&(t.current.style.opacity="0",t.current.style.visibility="hidden")};return Object(g.jsxs)("div",{className:d()("flex","relative","justify-between","items-center","w-full",e.className),children:[Object(g.jsx)("p",{className:d()("-translate-x-1/2","absolute","before:-top-1","before:-translate-x-1/2","before:absolute","before:bg-black","before:block","before:h-2","before:left-1/2","before:rotate-45","before:transform","before:w-2","before:z-0","bg-gray-800","duration-150","flex-col","flex","gap-1","font-bold","invisible","items-center","left-1/2","mt-2","mx-auto","px-3","py-2","rounded","text-white","text-xs","top-full","transform","transition-all","whitespace-nowrap","z-10"),ref:t,onMouseEnter:a,onMouseLeave:r,children:e.texts.map((function(e,t){return Object(g.jsx)("span",{children:e},e)}))}),Object(g.jsx)("div",{className:d()("w-full"),onMouseEnter:a,onMouseLeave:r,children:e.children})]})}));j.displayName="Tooltip";var p=Object(c.memo)((function(e){var t=e.member,a=t.division,r=t.department,n=t.streamAlignedTeam,s=t.tag,c=t.commits,i=t.role;return Object(g.jsxs)("dl",{"data-tooltip-target":"".concat(n.name,"_").concat(s.key,"_").concat(t.name),className:"relative font-semibold w-full ",children:[Object(g.jsx)("dt",{className:"text-gray-800 text-sm",children:t.dispname}),Object(g.jsxs)("dd",{className:" text-gray-400 mt-2",style:{fontSize:10},children:[a.name," / ",r.name]}),Object(g.jsx)("dd",{className:" text-gray-400 text-xs",children:i.name}),Object(g.jsx)("dd",{className:"flex rounded-lg overflow-hidden mt-2 bg-gray-200",children:Object.keys(t.commits).filter((function(e){return t.commits[e].rate>0})).reduce((function(e,a){for(var r=0;r<t.commits[a].rate;r++)e.push(Object(g.jsx)("div",{className:d()("h-2","border-gray-200"),style:{width:"".concat(10,"%"),background:t.commits[a].color}},"".concat(n.name,"_").concat(s.key,"_").concat(t.name,"_").concat(a,"_").concat(r)));return e}),[])}),Object(g.jsx)("dd",{className:"grid gap-1 mt-1",children:Object.keys(c).filter((function(e){return Number(c[e].rate)>0})).map((function(e){return Object(g.jsxs)("span",{className:"text-xs text-gray-600",children:[c[e].name,": ",10*c[e].rate,"%"]})}))}),Object(g.jsx)("i",{className:"absolute -right-4 -top-4 flex justify-center items-center bg-gray-200 text-xs rounded-full w-6 h-6 text-gray-400",children:t.tag.key})]})}));j.displayName="Tooltip";var h=function(e){var t=e.organization,a=e.master,r=a.streamAlignedTeams;return Object(g.jsx)("div",{className:d()(" grid grid-cols-3 gap-4 items-start",e.className),children:Object.keys(t.membersByTeams).map((function(n){var s=r[n],c=t.membersByTeams[n];return Object(g.jsxs)("section",{className:d()("h-full shadow-md rounded-md",e.className),children:[Object(g.jsx)("h2",{className:"font-extrabold text-xl text-center text-white rounded-sm flex justify-center p-1 h-auto",style:{background:s.color},children:s.name},"".concat(n,"-name")),Object(g.jsx)("main",{className:"gap-10 h-full",children:Object(g.jsx)("ul",{className:"grid grid-cols-3 gap-4 pt-4",children:Object.keys(t.membersByTag).sort((function(e,t){return a.tags[e].order-a.tags[t].order})).map((function(e){return t.membersByTag[e].filter((function(e){return c.includes(e)})).length?Object(g.jsx)(g.Fragment,{children:t.membersByTag[e].filter((function(e){return c.includes(e)})).map((function(t){return Object(g.jsx)("li",{className:d()("flex","justify-center","w-full","max-w-xs","p-2","shadow-sm","hover:shadow-md"),children:Object(g.jsx)(p,{member:t})},"".concat(n,"_").concat(e,"_").concat(t.name))}))}):null}))})},"".concat(n,"-body"))]})}))})};var x=function(e){var t=e.authInstance,a=e.spreadsheetId,r=Object(c.useState)(),i=Object(u.a)(r,2),l=i[0],o=i[1],m=Object(c.useState)(),j=Object(u.a)(m,2),p=j[0],x=j[1],O=Object(c.useState)(),v=Object(u.a)(O,2),y=v[0],w=v[1],N=Object(c.useState)(),A=Object(u.a)(N,2),k=A[0],T=A[1],B=Object(c.useState)(),I=Object(u.a)(B,2),E=I[0],F=I[1],M=Object(c.useState)(),P=Object(u.a)(M,2),L=P[0],C=P[1],R=Object(c.useState)(),S=Object(u.a)(R,2),G=S[0],z=S[1],D=Object(c.useState)(),J=Object(u.a)(D,2),U=J[0],K=J[1],V=Object(c.useState)(),X=Object(u.a)(V,2),H=X[0],Q=X[1],q=Object(c.useState)(),W=Object(u.a)(q,2),Z=W[0],Y=W[1],_=Object(c.useState)(),$=Object(u.a)(_,2),ee=$[0],te=$[1];function ae(){return(ae=Object(s.a)(n.a.mark((function e(){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.signIn();case 3:return r=e.sent,o(r),e.t0=x,e.next=8,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_division"});case 8:return e.t1=e.sent.result,(0,e.t0)(e.t1),e.t2=w,e.next=13,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_department"});case 13:return e.t3=e.sent.result,(0,e.t2)(e.t3),e.t4=T,e.next=18,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_group"});case 18:return e.t5=e.sent.result,(0,e.t4)(e.t5),e.t6=F,e.next=23,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_role"});case 23:return e.t7=e.sent.result,(0,e.t6)(e.t7),e.t8=C,e.next=28,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_stream_aligned_team"});case 28:return e.t9=e.sent.result,(0,e.t8)(e.t9),e.t10=z,e.next=33,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"master_tag"});case 33:return e.t11=e.sent.result,(0,e.t10)(e.t11),e.t12=Q,e.next=38,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:a,range:"table"});case 38:e.t13=e.sent.result,(0,e.t12)(e.t13),e.next=45;break;case 42:e.prev=42,e.t14=e.catch(0),alert("Error: "+e.t14);case 45:case"end":return e.stop()}}),e,null,[[0,42]])})))).apply(this,arguments)}function re(){return(re=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.signOut();case 3:o(void 0),Q(void 0),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Error: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ne(e){var t=e[0];return(null===e||void 0===e?void 0:e.filter((function(e,t){return t>0}))).reduce((function(e,a){var r=a.reduce((function(e,a,r){return e[t[r]]=a,e}),{});return e[r.key]=r,e}),{})}return Object(c.useEffect)((function(){p&&p.values&&y&&y.values&&k&&k.values&&E&&E.values&&L&&L.values&&G&&G.values&&K({divisions:ne(p.values),departments:ne(y.values),groups:ne(k.values),roles:ne(E.values),streamAlignedTeams:ne(L.values),tags:ne(G.values)})}),[p,y,k,E,L,G]),Object(c.useEffect)((function(){var e;if(U&&H&&H.values){var t=H.values[0],a=Object.keys(U.streamAlignedTeams),r=null===(e=H.values)||void 0===e?void 0:e.filter((function(e,t){return t>0})).map((function(e){return{name:e[t.indexOf("name")],division:U.divisions[e[t.indexOf("division")]],department:U.departments[e[t.indexOf("department")]],dispname:e[t.indexOf("dispname")],streamAlignedTeam:U.streamAlignedTeams[e[t.indexOf("stream_aligned_team")]],isDivisionManager:"TRUE"===e[t.indexOf("is_division_manager")],isDepartmentManager:"TRUE"===e[t.indexOf("is_department_manager")],isGroupLeader:"TRUE"===e[t.indexOf("is_group_leader")],group:U.groups[e[t.indexOf("group")]],role:U.roles[e[t.indexOf("role")]],tag:U.tags[e[t.indexOf("tag")]],workingRate:Number(e[t.indexOf("working_rate")]),enabled:"TRUE"===e[t.indexOf("enabled")],commits:a.reduce((function(a,r){return a[r]={name:U.streamAlignedTeams[r].name,rate:Math.round(Number(e[t.indexOf(r)])*Number(e[t.indexOf("working_rate")])*Number(e[t.indexOf("commits_rate")])*10),color:U.streamAlignedTeams[r].color},a}),{})}})).filter((function(e){return e.enabled})).sort((function(e){return e.isGroupLeader?-1:0})).sort((function(e){return e.isDepartmentManager?-1:0}));te(r)}}),[U,H]),Object(c.useEffect)((function(){if(ee&&U){var e=Object.keys(U.streamAlignedTeams),t=Object.keys(U.tags);Y({membersByTag:t.reduce((function(e,t){return e[t]=ee.filter((function(e){return e.tag.key===t})),e}),{}),membersByTeams:e.reduce((function(e,t){return e[t]=ee.filter((function(e){return e.streamAlignedTeam.key===t})),e}),{})})}}),[ee,U]),gapi.auth2?Object(g.jsxs)("div",{className:d()("relative","grid","grid-flow-row","gap-2","bg-gray-200"),children:[Object(g.jsx)(b,{className:d()("sticky","top-0","bg-gray-100","p-4","z-10","shadow-lg"),user:l,onClickLogout:function(){return re.apply(this,arguments)}}),Object(g.jsx)("main",{className:d()("relative","flex","p-4","gap-4"),children:U&&Z?Object(g.jsxs)(g.Fragment,{children:[ee?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(f,{className:d()("relative","bg-gray-50","p-4","shadow-lg"),master:U,members:ee})}):null,Object(g.jsx)(h,{className:"relative bg-gray-50 p-4 shadow-lg w-full",organization:Z,master:U})]}):Object(g.jsx)("button",{className:d()("justify-self-center","m-auto"),onClick:function(){return ae.apply(this,arguments)},children:Object(g.jsx)("img",{src:"data:image/png;base64,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",alt:""})})})]}):null},O=(a(16),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,22)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))});a(17).config();var v="AIzaSyA0kfS5T_RvsR1TJeO3yHr4Fxtrl-j88uI",y="746545264204-tr13jtretflc97f20pqnehpl02t1of22.apps.googleusercontent.com",w=new URLSearchParams(window.location.search),N=w.has("spreadsheet_id")?w.get("spreadsheet_id"):"1SIqIX6tYg7P4hecUJKGvICkqHpw6wAaNSqtqcnBJgxs";function A(){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.client.init({apiKey:v,discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],clientId:y,scope:"https://www.googleapis.com/auth/spreadsheets.readonly"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){try{if(gapi.load("client",A),!gapi.auth2||!N)return o.a.render(Object(g.jsx)(g.Fragment,{}),document.getElementById("root")),void setTimeout(T,1e3);var e=gapi.auth2.getAuthInstance();o.a.render(Object(g.jsx)(i.a.StrictMode,{children:e?Object(g.jsx)(x,{authInstance:e,spreadsheetId:N}):null}),document.getElementById("root")),O()}catch(t){console.error(t)}}T()}},[[21,1,2]]]);
//# sourceMappingURL=main.fb5f20b3.chunk.js.map